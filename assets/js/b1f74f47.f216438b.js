"use strict";(self.webpackChunkbrobridge_org_github_io=self.webpackChunkbrobridge_org_github_io||[]).push([[8040],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),c=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(a),h=n,m=d["".concat(l,".").concat(h)]||d[h]||p[h]||i;return a?r.createElement(m,o(o({ref:t},u),{},{components:a})):r.createElement(m,o({ref:t},u))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:n,o[1]=s;for(var c=2;c<i;c++)o[c]=a[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},4042:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=a(7462),n=(a(7294),a(3905));const i={sidebar_position:1},o="Your first Data Product",s={unversionedId:"quick-start/your-first-data-product",id:"version-2.0.0/quick-start/your-first-data-product",title:"Your first Data Product",description:"In this example, we will guide you through a quick start with Gravity. The task at hand is to funnel data from a source database (Source) through an Adapter into Gravity, and then create a Data Product, which is written into a heterogeneous target database (Target).",source:"@site/versioned_docs/version-2.0.0/quick-start/your-first-data-product.md",sourceDirName:"quick-start",slug:"/quick-start/your-first-data-product",permalink:"/docs/quick-start/your-first-data-product",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/versioned_docs/version-2.0.0/quick-start/your-first-data-product.md",tags:[],version:"2.0.0",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Quick start",permalink:"/docs/category/quick-start"},next:{title:"Concept",permalink:"/docs/category/concept"}},l={},c=[{value:"Create Gravity Container Cluster",id:"create-gravity-container-cluster",level:2},{value:"Cluster Description",id:"cluster-description",level:2},{value:"Source Database",id:"source-database",level:2},{value:"Target Database",id:"target-database",level:2},{value:"Adapter",id:"adapter",level:2},{value:"Dispatcher",id:"dispatcher",level:2},{value:"Schema",id:"schema",level:3},{value:"Rules",id:"rules",level:3},{value:"NATS JetStream",id:"nats-jetstream",level:2},{value:"Atomic",id:"atomic",level:2}],u={toc:c},d="wrapper";function p(e){let{components:t,...i}=e;return(0,n.kt)(d,(0,r.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"your-first-data-product"},"Your first Data Product"),(0,n.kt)("p",null,"In this example, we will guide you through a quick start with Gravity. The task at hand is to funnel data from a source database (Source) through an Adapter into Gravity, and then create a Data Product, which is written into a heterogeneous target database (Target)."),(0,n.kt)("p",null,"For this example, we have chosen MSSQL and MySQL as the two databases for heterogeneous replication. Please download the relevant files for the Quick Start first."),(0,n.kt)("h2",{id:"create-gravity-container-cluster"},"Create Gravity Container Cluster"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/BrobridgeOrg/gravity-quickstart\ncd gravity-quickstart\ndocker-compose up\n")),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(3268).Z,width:"2938",height:"1170"})),(0,n.kt)("h2",{id:"cluster-description"},"Cluster Description"),(0,n.kt)("p",null,"This completes the deployment of this Quick Start, which will launch a total of 6 containers. Here are the detailed descriptions of their uses:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Container"),(0,n.kt)("th",{parentName:"tr",align:null},"Purpose"),(0,n.kt)("th",{parentName:"tr",align:null},"Port"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"source-mssql"),(0,n.kt)("td",{parentName:"tr",align:null},"Simulates the source database"),(0,n.kt)("td",{parentName:"tr",align:null},"31433")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"target-mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"Simulates the target database for replication"),(0,n.kt)("td",{parentName:"tr",align:null},"33306")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"nats-jetstream"),(0,n.kt)("td",{parentName:"tr",align:null},"Event Store for the gravity-dispatcher"),(0,n.kt)("td",{parentName:"tr",align:null},"32803")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"gravity-dispatcher"),(0,n.kt)("td",{parentName:"tr",align:null},"Event handling and distribution for Data Product"),(0,n.kt)("td",{parentName:"tr",align:null},"N/A")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"gravity-adapter-mssql"),(0,n.kt)("td",{parentName:"tr",align:null},"Component for MSSQL Change Data Capture (CDC)"),(0,n.kt)("td",{parentName:"tr",align:null},"N/A")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"atomic"),(0,n.kt)("td",{parentName:"tr",align:null},"User interface for visual logic processing"),(0,n.kt)("td",{parentName:"tr",align:null},"1880")))),(0,n.kt)("h2",{id:"source-database"},"Source Database"),(0,n.kt)("p",null,"In this example, we have created an Accounts Table in MSSQL. This table is like any other table we would use for any service."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-SQL"},"CREATE TABLE Accounts (\n  id INT, \n  name NVARCHAR(50), \n  phone NVARCHAR(16)\n);\n")),(0,n.kt)("h2",{id:"target-database"},"Target Database"),(0,n.kt)("p",null,"In the target database, we also need to set up the schema. In this example, we are using MySQL, so the syntax will have some differences compared to the source database. Here is a schema example."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-SQL"},"CREATE TABLE `Accounts` (\n    `id` int(16) NOT NULL,\n    `name` varchar(50) CHARACTER SET utf8 DEFAULT NULL,\n    `phone` varchar(16) CHARACTER SET utf8 DEFAULT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n")),(0,n.kt)("h2",{id:"adapter"},"Adapter"),(0,n.kt)("p",null,"In order to achieve heterogenous replication, we will enable the Change Data Capture (CDC) functionality of the source database and use the Adapter component to store CDC events in JetStream. Although in this example, we only demonstrate with MSSQL, in fact, we provide many different adapters for users to choose their preferred database."),(0,n.kt)("h2",{id:"dispatcher"},"Dispatcher"),(0,n.kt)("p",null,"The Dispatcher standardizes the format of the CDC events, converting the events into Data Products for downstream consumers interested in this Data Product. After the Adapter publishes the CDC to NATS JetStream, the creation of the Data Product is not yet complete. We need to organize this event into a standard specification, with all fields having a predefined Type."),(0,n.kt)("h3",{id:"schema"},"Schema"),(0,n.kt)("p",null,"The schema is a way to predefine the format of JSON to the Dispatcher using the CLI. Below is the schema for this example."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascipt"},'{\n    "id": { "type": "uint" },\n    "name": { "type": "string" },\n    "type": { "type": "string" },\n    "phone": { "type": "string" },\n    "address": { "type": "string" }\n}\n')),(0,n.kt)("h3",{id:"rules"},"Rules"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascipt"},"return {\n    id: source.id,\n    name: source.name,\n    type: source.type,\n    phone: source.phone,\n    address: source.address\n}\n")),(0,n.kt)("h2",{id:"nats-jetstream"},"NATS JetStream"),(0,n.kt)("p",null,"NATS JetStream plays a crucial infrastructure role within Gravity. It is responsible for persisting events. The Adapter will store the events it intercepts here, and the Dispatcher also reads and writes events from NATS JetStream for subsequent processing."),(0,n.kt)("h2",{id:"atomic"},"Atomic"),(0,n.kt)("p",null,"Atomic is a flow logic processing component that is compatible with Node-RED. Users can understand their needs and process Gravity's Data Product according to their requirements. In this example, we have set up the flow to synchronize data changes from the source database to the target database."),(0,n.kt)("p",null,"Open your browser and navigate to the Atomic's GUI by entering the port number assigned to Atomic."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"http://127.0.0.1:1880/\n")),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(9062).Z,width:"2802",height:"918"})))}p.isMDXComponent=!0},9062:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/atomic-b5858c9ab283bb20088fdd79fec72e23.png"},3268:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/cluster-d5111676daa053e08d40301f56ab3f6e.png"}}]);