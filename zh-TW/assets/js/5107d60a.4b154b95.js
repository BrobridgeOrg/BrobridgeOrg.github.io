"use strict";(self.webpackChunkgravity_doc=self.webpackChunkgravity_doc||[]).push([[957],{9888:(i,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var t=n(4848),c=n(8453);const r={},s="Batch Processing Module",a={id:"atomic/atomic-batch-feature",title:"Batch Processing Module",description:"Edited by Enoch, Jan 22, 2025",source:"@site/docs/atomic/atomic-batch-feature.md",sourceDirName:"atomic",slug:"/atomic/atomic-batch-feature",permalink:"/zh-TW/docs/atomic/atomic-batch-feature",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docSidebar",previous:{title:"Create Atomic flow",permalink:"/zh-TW/docs/atomic/atomic_guide"},next:{title:"Gravity CLI",permalink:"/zh-TW/docs/cli"}},l={},d=[{value:"<em>1.</em> Atomic\u76f8\u95dc\u670d\u52d9\u8aaa\u660e",id:"1-atomic\u76f8\u95dc\u670d\u52d9\u8aaa\u660e",level:2},{value:"<em>2.</em> Atomic\u76f8\u95dc\u670d\u52d9\u5b89\u88dd\u8207\u74b0\u5883\u8a2d\u5b9a",id:"2-atomic\u76f8\u95dc\u670d\u52d9\u5b89\u88dd\u8207\u74b0\u5883\u8a2d\u5b9a",level:2},{value:"<em>3.</em> Atomic Batch \u529f\u80fd\u4f7f\u7528\u4ecb\u7d39",id:"3-atomic-batch-\u529f\u80fd\u4f7f\u7528\u4ecb\u7d39",level:2},{value:"<em>4.</em> Atomic Batch \u529f\u80fd\u9810\u671f\u884c\u70ba",id:"4-atomic-batch-\u529f\u80fd\u9810\u671f\u884c\u70ba",level:2},{value:"<em>5.</em> Atomic Batch \u6e2c\u8a66\u60c5\u5883",id:"5-atomic-batch-\u6e2c\u8a66\u60c5\u5883",level:2}];function o(i){const e={a:"a",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,c.R)(),...i.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"batch-processing-module",children:"Batch Processing Module"})}),"\n",(0,t.jsx)(e.p,{children:"Edited by Enoch, Jan 22, 2025"}),"\n",(0,t.jsxs)(e.h2,{id:"1-atomic\u76f8\u95dc\u670d\u52d9\u8aaa\u660e",children:[(0,t.jsx)(e.em,{children:"1."})," Atomic\u76f8\u95dc\u670d\u52d9\u8aaa\u660e"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"atomic-gravity: \u70baatomic\u9801\u9762\u4e2d\u90a3\u4e9b\u7d66gravity\u4f7f\u7528\u7684component, \u50cf\u662fsubscriber, publish, server\u2026etc, \u53ef\u8996\u70baatomic\u7684client\u7aef"}),"\n",(0,t.jsx)(e.li,{children:"node-gravity-sdk: \u70ba\u4e0a\u8ff0\u7684sdk, \u4e3b\u8981\u5be6\u4f5c\u8207gravity\u4e2dnats\u7b49\u5143\u4ef6\u7684\u64cd\u4f5c"}),"\n",(0,t.jsx)(e.li,{children:"atomic: \u70bagravity atomic \u9ede\u958b\u9023\u7d50\u770b\u5230\u7684\u524d\u7aef\u9801\u9762"}),"\n"]}),"\n",(0,t.jsxs)(e.h2,{id:"2-atomic\u76f8\u95dc\u670d\u52d9\u5b89\u88dd\u8207\u74b0\u5883\u8a2d\u5b9a",children:[(0,t.jsx)(e.em,{children:"2."})," Atomic\u76f8\u95dc\u670d\u52d9\u5b89\u88dd\u8207\u74b0\u5883\u8a2d\u5b9a"]}),"\n",(0,t.jsx)(e.p,{children:"git clone \u4e0a\u8ff0\u4e09\u4efd\u5c08\u6848\u65bclocal\u4e0a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["atomic\n",(0,t.jsx)(e.a,{href:"https://github.com/BrobridgeOrg/atomic.git%5D",children:"https://github.com/BrobridgeOrg/atomic.git"})]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["atomic-gravity\n",(0,t.jsx)(e.a,{href:"https://github.com/BrobridgeOrg/atomic-gravity.git",children:"https://github.com/BrobridgeOrg/atomic-gravity.git"})]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["node-gravity-sdk\n",(0,t.jsx)(e.a,{href:"https://github.com/BrobridgeOrg/node-gravity-sdk.git",children:"https://github.com/BrobridgeOrg/node-gravity-sdk.git"})]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u9810\u671f\u7684\u8cc7\u6599\u593e\u4f4d\u7f6e"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"/brobridge"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"/atomic"}),"\n",(0,t.jsx)(e.li,{children:"/atomic-gravity"}),"\n",(0,t.jsx)(e.li,{children:"/node-gravity-sdk"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u8abf\u6574\u5404\u81ea\u5c08\u6848\u53c3\u8003\u7684pacakge \u4f4d\u7f6e(package.json)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:'atomic-gravity: \u65bcdependencies\u4e2d\u52a0\u5165: "gravity-sdk": "file:../node-gravity-sdk",'}),"\n",(0,t.jsx)(e.li,{children:"node-gravity-sdk:"}),"\n",(0,t.jsx)(e.li,{children:'atomic: \u5b89\u88dd\u6642\u6703\u5728$HOME\u76ee\u9304\u4e0b\u7522\u751f.node-red\u8cc7\u6599\u593e, \u6240\u4ee5\u9700\u4fee\u6539\u7576\u4e2d\u7684dependencies\u4f86\u6307\u5411\u5c0d\u61c9\u53c3\u8003\u7684package\u4f4d\u7f6e\u589e\u52a0 "atomic-gravity": "file:../brobridge/atomic-gravity",'}),"\n"]}),"\n",(0,t.jsxs)(e.h2,{id:"3-atomic-batch-\u529f\u80fd\u4f7f\u7528\u4ecb\u7d39",children:[(0,t.jsx)(e.em,{children:"3."})," Atomic Batch \u529f\u80fd\u4f7f\u7528\u4ecb\u7d39"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.img,{alt:"image",src:n(7800).A+"",width:"1043",height:"340"}),"\n\u4e0a\u8ff0\u8a2d\u5b9a\u5b8c\u6210\u4e4b\u5f8c, \u53ef\u65bcatomic\u5c08\u6848\u4e0b\u4f7f\u7528npm start\u555f\u52d5\u5c08\u6848\n\u65bc\u5de6\u908atab\u4e2d\u9078\u53d6components: subscriber\u3001function\u3001mssql\u3001gravity acknowledge..etc"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"gravity subscriber: \u7576\u4e2d\u53ef\u4ee5\u8a2d\u5b9a\u5df2\u5efa\u7acb\u597d\u7684nats \u4f4d\u7f6e\u4ee5\u53cadata product\u548cbatch\u7684size"}),"\n",(0,t.jsx)(e.li,{children:"function: \u4e3b\u8981\u5c07\u6536\u5230\u7684\u8cc7\u6599\u4ee5\u6279\u6b21\u7684\u5f62\u5f0f\u6574\u7406\u597dinsert\u8fd1\u8cc7\u6599\u5eab\u7684\u5be6\u4f5c\u7a0b\u5f0f\u78bc"}),"\n",(0,t.jsx)(e.li,{children:"mssql execute: \u4e3b\u8981\u8a2d\u5b9a\u6b32insert\u5165\u7684\u8cc7\u6599\u5eab\u8a2d\u5b9a"}),"\n",(0,t.jsx)(e.li,{children:"gravity acknowledge: \u4e3b\u8981\u662f\u7528\u4f86\u7576\u6210\u529f\u5beb\u5165\u6279\u6b21\u8cc7\u6599\u81f3\u8cc7\u6599\u5eab\u6642, \u6703\u767c\u8d77\u4e00\u500back \u901a\u77e5nats\u53ef\u4ee5\u7e7c\u7e8c\u9001\u4e0b\u4e00\u6279\u6b21\u7684\u8cc7\u6599\u4e86, \u4e14\u901a\u5e38\u9700\u8981\u642d\u914dgravity subscriber\u4e2d\u7684manual ack\u624d\u6709\u4f5c\u7528"}),"\n",(0,t.jsx)(e.li,{children:"debug: \u53ef\u5c07\u4e32\u63a5\u5230\u6b64\u7bc0\u9ede\u7684\u8cc7\u6599\u4ee5debug mode\u65b9\u5f0f\u5448\u73fe\u5728\u53f3\u908a\u6b04\u4f4d\u4e0a"}),"\n",(0,t.jsx)(e.li,{children:"catch: \u53ef\u4ee5\u76e3\u807d\u67d0\u500bnode\u4e0a\u7684\u72c0\u614b, \u5982\u679c\u6709\u932f\u8aa4\u5373\u53ef\u88ab\u6355\u7372\u4e26\u8207acknowldege\u505a\u9032\u4e00\u6b65\u7684\u642d\u914d\u56de\u50b3nak\u81f3nats\u4e0a\u4f86\u91cd\u65b0\u7d22\u53d6\u5df2\u64cd\u4f5c\u7684\u5931\u6557\u7684\u8a72\u6279\u8cc7\u6599"}),"\n"]}),"\n",(0,t.jsxs)(e.h2,{id:"4-atomic-batch-\u529f\u80fd\u9810\u671f\u884c\u70ba",children:[(0,t.jsx)(e.em,{children:"4."})," Atomic Batch \u529f\u80fd\u9810\u671f\u884c\u70ba"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u5047\u8a2d\u6279\u6b21\u7684\u91cf\u70ba1000, \u4e26\u65bcsubscriber\u4e2d\u8a2d\u5b9amanual ack, \u4e14\u6536\u5230\u4e4b\u5f8c\u70ba\u6b64\u6279\u6b21\u7d66\u4e88manual ack, \u5176\u76ee\u524d\u9810\u671f\u6b63\u5e38\u884c\u70ba\u662f:","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5982\u679c\u55ae\u7d14\u6536\u53d6\u8cc7\u6599\u4e0d\u843d\u5730\u81f3\u4efb\u4f55\u8cc7\u6599\u5eab(\u672a\u7d93\u904efunction & mssql), \u5247\u8cc7\u6599\u7b46\u6578\u8207\u9806\u5e8f\u6703\u8207\u539f\u8cc7\u6599\u76f8\u540c"}),"\n",(0,t.jsxs)(e.li,{children:["\u5982\u679c\u53d6\u5b8c\u8cc7\u6599\u4e26\u4e14\u6709\u843d\u5730\u8cc7\u6599\u5eab, \u6703\u4ee5\u6279\u6b21\u7684\u65b9\u5f0f\u6210\u529f\u5beb\u5165\u8cc7\u6599\u5eab:","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u4f46\u662f\u5982\u679c\u518d\u91cd\u65b0\u9001\u4e00\u6279\u820a\u7684\u8cc7\u6599, \u5247\u6703\u56e0duplicate data error\u800c\u5c0e\u81f4\u5beb\u5165\u5931\u6557, \u6b64\u6642subscriber\u4e5f\u6703\u89f8\u767c\u91cd\u50b3\u6a5f\u5236, \u6703\u4e00\u76f4\u9001\u51fa\u8a72\u6279\u76f8\u540c\u7684\u8cc7\u6599"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\u4e5f\u56e0\u70ba\u958b\u767c\u6279\u6b21\u7684\u529f\u80fd\u4e4b\u5f8c, \u6574\u500b\u53d6\u8cc7\u6599\u7684\u8cc7\u6599\u7d50\u69cb\u548c\u908f\u8f2f\u4e5f\u6709\u4fee\u6539, \u9664\u4e86\u4e0a\u8ff0\u7684\u529f\u80fd\u958b\u767c\u4e4b\u5916, \u4e5f\u4fee\u6539\u4e86\u5c0d\u55ae\u7b46\u8cc7\u6599\u7684\u5b58\u53d6, \u5176\u76ee\u524d\u9810\u671f\u6b63\u5e38\u884c\u70ba\u662f:","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5982\u679c\u53d6\u55ae\u7b46\u8cc7\u6599\u6642\u4e26\u4e0d\u843d\u5730, \u7d50\u675f\u5f8c\u5247\u6578\u91cf\u8207\u9806\u5e8f\u6703\u8207\u539f\u8cc7\u6599\u76f8\u540c"}),"\n",(0,t.jsxs)(e.li,{children:["\u5982\u679c\u53d6\u55ae\u7b46\u8cc7\u6599\u6642\u843d\u5730\u81f3\u8cc7\u6599\u5eab\u7684\u8a71, \u5247\u6703\u4ee5\u6bcf\u7b46\u8cc7\u6599insert\u7684\u65b9\u5f0f\u5beb\u5165\u81f3\u8cc7\u6599\u5eab","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u4f46\u662f\u5982\u679c\u518d\u5beb\u5165\u5df2\u6709\u7684\u8cc7\u6599\u6642, \u5247\u6703\u56e0duplicate data error\u800c\u5c0e\u81f4\u5beb\u5165\u5931\u6557, \u6b64\u6642subscriber\u4e5f\u6703\u89f8\u767c\u91cd\u50b3\u6a5f\u5236, \u6703\u4e00\u76f4\u9001\u51fa\u8a72\u7b46\u76f8\u540c\u7684\u8cc7\u6599"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.h2,{id:"5-atomic-batch-\u6e2c\u8a66\u60c5\u5883",children:[(0,t.jsx)(e.em,{children:"5."})," Atomic Batch \u6e2c\u8a66\u60c5\u5883"]}),"\n",(0,t.jsx)(e.p,{children:"\u76ee\u524d\u5e0c\u671b\u80fd\u6e2c\u8a66\u66f4\u5927\u91cf\u7684\u8cc7\u6599\u91cf, 10\u842c, 100\u842c, \u60c5\u5883\u662f\u55ae\u7d14\u5beb\u5165\u8cc7\u6599\u5eab\u5373\u53ef\n\u5982\u679c\u6210\u529f\u5247\u5beb\u5165\u8cc7\u6599\u5eab, \u5931\u6557\u5247\u6703\u7e7c\u7e8c\u56de\u50b3\u8a72\u6279\u6b21\u7684\u6a94\u6848"})]})}function h(i={}){const{wrapper:e}={...(0,c.R)(),...i.components};return e?(0,t.jsx)(e,{...i,children:(0,t.jsx)(o,{...i})}):o(i)}},7800:(i,e,n)=>{n.d(e,{A:()=>t});const t=n.p+"assets/images/atomic-batch1-2aa67aa36e4e9a6123bec7f32521db4b.png"},8453:(i,e,n)=>{n.d(e,{R:()=>s,x:()=>a});var t=n(6540);const c={},r=t.createContext(c);function s(i){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof i?i(e):{...e,...i}}),[e,i])}function a(i){let e;return e=i.disableParentContext?"function"==typeof i.components?i.components(c):i.components||c:s(i.components),t.createElement(r.Provider,{value:e},i.children)}}}]);