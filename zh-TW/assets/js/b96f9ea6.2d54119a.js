"use strict";(self.webpackChunkgravity_doc=self.webpackChunkgravity_doc||[]).push([[383],{574:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>c,toc:()=>o});var s=t(4848),r=t(8453);const d={},i="Informix DB Adapter",c={id:"config/adapter-config/informix",title:"Informix DB Adapter",description:"1. config.toml Explanation",source:"@site/docs/config/adapter-config/informix.md",sourceDirName:"config/adapter-config",slug:"/config/adapter-config/informix",permalink:"/zh-TW/docs/config/adapter-config/informix",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docSidebar",previous:{title:"MongoDB Adapter",permalink:"/zh-TW/docs/config/adapter-config/mongodb"},next:{title:"Oracle Golden Gate to Kafka Adapter",permalink:"/zh-TW/docs/config/adapter-config/ogg"}},l={},o=[{value:"<em>1.</em> <code>config.toml</code> Explanation",id:"1-configtoml-explanation",level:2},{value:"<em>1.1</em> Example of <code>configs/config.toml</code>",id:"11-example-of-configsconfigtoml",level:3},{value:"<em>1.2</em> Parameters",id:"12-parameters",level:3},{value:"<em>2.</em> <code>settings.json</code> Explanation",id:"2-settingsjson-explanation",level:2},{value:"<em>2.1</em> Example of <code>settings/sources.json</code>",id:"21-example-of-settingssourcesjson",level:3},{value:"<em>2.2</em> Parameters",id:"22-parameters",level:3},{value:"<em>3.</em> Build",id:"3-build",level:2},{value:"<em>4.</em> Log Levels",id:"4-log-levels",level:2}];function a(e){const n={blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"informix-db-adapter",children:"Informix DB Adapter"})}),"\n",(0,s.jsxs)(n.h2,{id:"1-configtoml-explanation",children:[(0,s.jsx)(n.em,{children:"1."})," ",(0,s.jsx)(n.code,{children:"config.toml"})," Explanation"]}),"\n",(0,s.jsxs)(n.h3,{id:"11-example-of-configsconfigtoml",children:[(0,s.jsx)(n.em,{children:"1.1"})," Example of ",(0,s.jsx)(n.code,{children:"configs/config.toml"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[gravity]\ndomain = "default"\nhost = "0.0.0.0"\nport = 4222\npingInterval = 10\nmaxPingsOutstanding = 3\nmaxReconnects = -1\naccessToken = ""\npublishBatchSize = 1000\nrateLimit = 0\n\n[service]\nport = 8080\n\n[source]\nconfig = "./settings/sources.json"\n\n[store]\nenabled = false\npath = "./statestore"\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"12-parameters",children:[(0,s.jsx)(n.em,{children:"1.2"})," Parameters"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gravity.domain"})}),(0,s.jsx)(n.td,{children:"Sets the Gravity domain"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gravity.host"})}),(0,s.jsx)(n.td,{children:"Sets the Gravity NATS IP address"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gravity.port"})}),(0,s.jsx)(n.td,{children:"Sets the Gravity NATS port"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gravity.pingInterval"})}),(0,s.jsx)(n.td,{children:"Sets the Gravity ping interval"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gravity.maxPingsOutstanding"})}),(0,s.jsx)(n.td,{children:"Sets the maximum outstanding pings"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gravity.maxReconnects"})}),(0,s.jsx)(n.td,{children:"Sets the maximum number of reconnections"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gravity.accessToken"})}),(0,s.jsx)(n.td,{children:"Sets the Gravity access token (for authentication)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gravity.publishBatchSize"})}),(0,s.jsx)(n.td,{children:"Sets the batch size for events sent to NATS"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gravity.rateLimit"})}),(0,s.jsx)(n.td,{children:"Sets the maximum rate (per second) for events sent to NATS (0 = no limit)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"service.port"})}),(0,s.jsx)(n.td,{children:"Sets the RESTful API service port"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"source.config"})}),(0,s.jsx)(n.td,{children:"Path to the source configuration file"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"store.enabled"})}),(0,s.jsx)(n.td,{children:"Enables persistent volume mounting (required for batch mode)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"store.path"})}),(0,s.jsx)(n.td,{children:"Path for mounting the persistent volume (required for batch mode)"})]})]})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"INFO"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"config.toml"})," settings can also be provided via environment variables. The naming convention is as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GRAVITY_ADAPTER_INFORMIX_[SECTION]_[KEY]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["All letters are uppercase, and underscores (",(0,s.jsx)(n.code,{children:"_"}),") separate the sections and keys.",(0,s.jsx)(n.br,{}),"\n","Example for ",(0,s.jsx)(n.code,{children:"gravity.host"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"env:\n- name: GRAVITY_ADAPTER_INFORMIX_GRAVITY_HOST\n  value: 192.168.0.1\n"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"2-settingsjson-explanation",children:[(0,s.jsx)(n.em,{children:"2."})," ",(0,s.jsx)(n.code,{children:"settings.json"})," Explanation"]}),"\n",(0,s.jsxs)(n.h3,{id:"21-example-of-settingssourcesjson",children:[(0,s.jsx)(n.em,{children:"2.1"})," Example of ",(0,s.jsx)(n.code,{children:"settings/sources.json"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n   "sources": {\n      "informix1": {\n         "uri": "/dataInput",\n         "disabled": false,\n         "batch_mode": true,\n         "dbs": {\n            "dfedemo_ifx": {\n               "tables": {\n                  "customer": {\n                     "events": {\n                        "create": "accountCreated",\n                        "update": "accountUpdated",\n                        "delete": "accountDeleted"\n                     }\n                  },\n                  "user": {\n                     "events": {\n                        "create": "userCreated",\n                        "update": "userUpdated",\n                        "delete": "userDeleted"\n                     }\n                  }\n               }\n            },\n            "TestDB": {\n               "tables": {\n                  "account": {\n                     "events": {\n                        "create": "accountCreated",\n                        "update": "accountUpdated",\n                        "delete": "accountDeleted"\n                     }\n                  },\n                  "user": {\n                     "events": {\n                        "create": "userCreated",\n                        "update": "userUpdated",\n                        "delete": "userDeleted"\n                     }\n                  }\n               }\n            }\n         }\n      },\n      "informix2": {\n         "uri": "/dataInput2",\n         "disabled": false,\n         "batch_mode": false,\n         "dbs": {\n            "dfedemo_ifx": {\n               "tables": {\n                  "customer": {\n                     "events": {\n                        "create": "accountCreated",\n                        "update": "accountUpdated",\n                        "delete": "accountDeleted"\n                     }\n                  },\n                  "user": {\n                     "events": {\n                        "create": "userCreated",\n                        "update": "userUpdated",\n                        "delete": "userDeleted"\n                     }\n                  }\n               }\n            },\n            "TestDB": {\n               "tables": {\n                  "account": {\n                     "events": {\n                        "create": "accountCreated",\n                        "update": "accountUpdated",\n                        "delete": "accountDeleted"\n                     }\n                  },\n                  "user": {\n                     "events": {\n                        "create": "userCreated",\n                        "update": "userUpdated",\n                        "delete": "userDeleted"\n                     }\n                  }\n               }\n            }\n         }\n      }\n   }\n}\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"22-parameters",children:[(0,s.jsx)(n.em,{children:"2.2"})," Parameters"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sources.SOURCE_NAME.uri"})}),(0,s.jsxs)(n.td,{children:["Sets the RESTful API URI (e.g., ",(0,s.jsx)(n.code,{children:"POST http://127.0.0.1:8080/dataInput"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sources.SOURCE_NAME.disabled"})}),(0,s.jsx)(n.td,{children:"Whether to disable this source"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sources.SOURCE_NAME.batch_mode"})}),(0,s.jsxs)(n.td,{children:["Enables batch mode; if true, persistent volume must be mounted (refer to ",(0,s.jsx)(n.code,{children:"config.toml"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sources.SOURCE_NAME.dbs.DB_NAME"})}),(0,s.jsx)(n.td,{children:"Sets the Informix database name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sources.SOURCE_NAME.dbs.DB_NAME.tables.TABLE_NAME.event.create"})}),(0,s.jsx)(n.td,{children:"Event name for record creation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sources.SOURCE_NAME.dbs.DB_NAME.tables.TABLE_NAME.event.update"})}),(0,s.jsx)(n.td,{children:"Event name for record updates"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sources.SOURCE_NAME.dbs.DB_NAME.tables.TABLE_NAME.event.delete"})}),(0,s.jsx)(n.td,{children:"Event name for record deletion"})]})]})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"INFO"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"settings.json"})," configuration can also be provided via environment variables.",(0,s.jsx)(n.br,{}),"\n","Environment variable format:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'env:\n- name: GRAVITY_ADAPTER_INFORMIX_SOURCE_SETTINGS\n  value: |\n    {\n      "sources": {\n        "informix1": {\n          "uri": "/dataInput",\n          "disabled": false,\n          "batch_mode": true,\n          ...\n        }\n      }\n    }\n'})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"3-build",children:[(0,s.jsx)(n.em,{children:"3."})," Build"]}),"\n",(0,s.jsx)(n.p,{children:"To build the adapter image, use the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"podman buildx build --platform linux/amd64 -t hb.k8sbridge.com/gravity/gravity-adapter-informix:v0.0.3 -f build/docker/Dockerfile .\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"4-log-levels",children:[(0,s.jsx)(n.em,{children:"4."})," Log Levels"]}),"\n",(0,s.jsxs)(n.p,{children:["Log levels can be configured using environment variables (default: ",(0,s.jsx)(n.code,{children:"info"}),").",(0,s.jsx)(n.br,{}),"\n","Available levels: ",(0,s.jsx)(n.strong,{children:"trace"}),", ",(0,s.jsx)(n.strong,{children:"debug"}),", ",(0,s.jsx)(n.strong,{children:"info"}),", ",(0,s.jsx)(n.strong,{children:"error"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"env:\n- name: GRAVITY_DEBUG\n  value: debug\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var s=t(6540);const r={},d=s.createContext(r);function i(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);